@model PizzaListViewModel

    <h1>Caldo</h1>
    <h3>
        @Model.CurrentCategory
    </h3>
    <div class="row">
        @foreach (var pizza in Model.Pizzas)
        {
            @Html.Partial("PizzaOverviewSumary", pizza);
            
        }
     </div>



@*//Iz nekog razloga mi izbacuje samo 10 itema u infinity scrolu*@

@*<div id="pizzaDiv" class="row">

    </div>
    @section scripts{
        <script>
            $(document).ready(function () {
                LoadMorePizzas();
            });

            $(window).scroll(function () {
                if ($(window).scrollTop() + $(window).height() >= $(document).height()) {
                    LoadMorePizzas();
                }
            });

            function LoadMorePizzas() {
                $.ajax({
                    type: 'GET',
                    url: '/api/PizzaData',
                    dataType: 'json',
                    success: function (jsonData) {
                        if (jsonData == null) {
                            alert('no data returned');
                            return;
                        }

                        $.each(jsonData, function (index, pizza) {
                            var PizzaSummarString = '<div class="col-sm-4 col-lg-4 col-md-4"> ' +
                                '  <div class="thumbnail">' +
                                '     <img src="' + pizza.slikaThumbUrl + ' "width="320" height="220" alt="">' +
                                '      <div class="caption">' +
                                '         <h5 class="pull-right">' + pizza.cena + '</h5>' +
                                '         <h5>' +
                                '             <a href=/Pizza/Details?Id=' + pizza.pizzaId + '>' + pizza.ime + '</a>' +
                                '         </h5>' +
                                '         <p>' + pizza.maliOpis + '</p>' +
                                '    </div>' +
                                '    <div class="addToCart">' +
                                '        <p class="button">' +
                                '             <a class="btn btn-primary" href=/ShoppingCart/AddToShoppingCart?pizzaId=' + pizza.pizzaId + '>Add to cart</a>' +
                                '         </p>' +
                                '     </div>' +
                                '  </div>' +
                                '</div>';

                            $('#pizzadiv').append(pizzasummarstring);
                        });
                    },
                    error: function (ex) {
                        alert(ex);
                    }
                });
                return false;
            }
        </script>
    }*@

